## Инструкция по установке плагина Invoice для iiko
Для использования плагина необходима лицензия api Payment
### 1. Установка плагина.  
1. Скачайте плагин ***[Invoice.Installer.iiko.exe](https://github.com/Invoice-LLC/Invoice.Module.iiko/releases/download/1.4.0.0/Invoice.Installer.exe)*** и запустите его от имени администратора.
2. Нажмите на кнопку "Установить"<br>

![Нажмите "Установить"](/img/01_Установить.png)

3. Подтвердите свое согласие с Лицензионным соглашением на использование плагина. Нажмите на 
кнопку "Согласен".<br>

![Подтвердите согласие с лицензией](/img/02_Согласие.png)

4. Введите данные для настройки плагина Invoice с iiko.Front: <br>
- Укажите путь к iiko.Front в поле "Выберете путь к iiko.Front".<br> 
- Введите в поле "Введите Merchant ID" значение поля "ID компании", указанного в настройках 
личного кабинета Invoice. <br>
- Введите в поле "Введите API ключ" значение поля "API ключ", указанного в настройках 
личного кабинета Invoice. <br>
- Из выпадающего списка необходимо выбрать тип терминала.  <br>
- После ввода ключей в поля формы и выбора терминала, нажмите на кнопку "Далее". <br>
Точное расположение необходимых ключей в разделе "Настройки" личного кабинета Invoice приведено ниже.<br>

![Укажите путь к iiko.Front, Merchant ID и API-ключ](/img/03_Ключи.png)

<br>Точное расположение необходимых ключей в разделе "Настройки" личного кабинета Invoice:
- Перейдите в ***[личный кабинет Invoice](https://lk.invoice.su/)***:<br>
- В разделе "Настройки" перейдите во вкладку "Общее". 
- Спуститесь вниз раздела. <br>

![image](/img/04_ЛК_Ключи.png)
![image](/img/05_ЛК_Ключи.png)


5. После нажатия кнопки "Далее" (см. пункт 4), в открывшемся окне нажмите на кнопку "Готово". <br> 

![Готово! Теперь перезагрузите iiko.Front](/img/06_Готово.png)

6. Теперь перезагрузите iiko.Front.<br>

### 2. Сервер iikoOffice.
1. После первого запуска кассы с плагином, необходимо настроить тип оплат в iikoOffice:
- В разделе "Розничные продажи" перейдите во вкладку "Типы оплат".<br>
- Нажмите на кнопку "Добавить". <br>

![Imgur](/img/07_office.png)

2. После нажатия "Добавить", во вкладке "Типы оплат", введите необходимые настройки для Invoice:<br>
- В поле "Наименование" введите значение "Invoice"
- В поле "Тип" необходимо выбрать значение "Внешний тип оплаты"
- В поле "Название в чеке" введите значение "Invoice"
- Уберите голочку в пункте "Открывать денежный ящик"
- В поле "Безналичный тип" необходимо выбрать значение "Invoice" 
- Нажмите на кнопку "Сохранить"

![Imgur](/img/08_office.png)

3. Добавьте учетную запись для Invoice:<br>
- В разделе "Сотрудники" перейдите во вкладку "Список сотрудников"
- Нажмите на кнопку "Добавить"

![Imgur](/img/09_office.png)

4. На открывшейся странице "Персональная карточка" перейдите во вкладку "Основные сведения":
- В поле "Имя в системе" введите значение "Invoice"
- В поле "Должность" необходимо выбрать "Системный администратор" 
- После выбора должности система может запросить подтверждение "Установить ставки оплаты 
на значения для должностей Системный администратор". Если система запросит данное подтверждение, 
нажмите в нем на кнопку "Нет" 
- Поставьте галочку в пункте "Только для плагинов"
- Нажмите на кнопку "Сохранить"

![Imgur](/img/10_office.png)

5. На странице "Персональная карточка" перейдите во вкладку "Дополнительные сведения":
- В поле "ПИН-код введите значение **"01599510"**
- Нажмите на кнопку "Сохранить"

![Imgur](/img/11_office.png)

6. Для подключения функции "Возврат", необходимо добавить новый тип оплаты:
- В разделе "Розничные продажи" перейдите во вкладку "Типы оплат".<br>
- Нажмите на кнопку "Добавить". <br>

![Imgur](/img/07_office.png)

7. После нажатия "Добавить", во вкладке "Типы оплат", введите необходимые настройки для функции "Возврат Invoice":<br>
- В поле "Наименование" введите значение "Возврат Invoice"
- В поле "Тип" необходимо выбрать значение "Настраиваемый тип оплаты"
- В поле "Название в чеке" введите значение "Возврат Invoice"
- Уберите голочку в пункте "Открывать денежный ящик"
- В поле "Базовый тип оплаты" необходимо выбрать значение "Invoice"
- В поле "Тип документа" необходимо выбрать значение "Возврат от покупателя"
- В поле "Счет выручки" необходимо выбрать значение "Торговая выручка без учета скидок"
- В поле "Счет списания" необходимо выбрать значение "Расход продуктов"
- Нажмите на кнопку "Сохранить"

![Imgur](/img/12_Возврат.png)

8. Чтобы убедиться, что установка прошла успешно, перейдите в iiko.Front. Нажмите на кнопку 
"Дополнения". В окне "Плагины" нажмите на кнопку "Invoice". Отобразится информация о плагине.


![Imgur](/img/13_end.png)